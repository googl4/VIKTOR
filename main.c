#include <stdio.h>
#include <stdlib.h>

#define WIN32_LEAN_AND_MEAN
#include "windows.h"

//#define VK_USE_PLATFORM_WIN32_KHR
#include "volk.h"

//#include "openvr_capi.h"

#include "types.h"

#define VK_COLOR_COMPONENT_RG_BITS VK_COLOR_COMPONENT_R_BIT | VK_COLOR_COMPONENT_G_BIT
#define VK_COLOR_COMPONENT_RGB_BITS VK_COLOR_COMPONENT_R_BIT | VK_COLOR_COMPONENT_G_BIT | VK_COLOR_COMPONENT_B_BIT
#define VK_COLOR_COMPONENT_RGBA_BITS VK_COLOR_COMPONENT_R_BIT | VK_COLOR_COMPONENT_G_BIT | VK_COLOR_COMPONENT_B_BIT | VK_COLOR_COMPONENT_A_BIT

u32 testVert[] = {
	0x07230203,0x00010000,0x00080008,0x00000037,0x00000000,0x00020011,0x00000001,0x0006000b,
	0x00000001,0x4c534c47,0x6474732e,0x3035342e,0x00000000,0x0003000e,0x00000000,0x00000001,
	0x0008000f,0x00000000,0x00000004,0x6e69616d,0x00000000,0x00000022,0x00000026,0x00000032,
	0x00030003,0x00000002,0x000001c2,0x00040005,0x00000004,0x6e69616d,0x00000000,0x00050005,
	0x0000000c,0x69736f70,0x6e6f6974,0x00000073,0x00040005,0x00000016,0x6f6c6f63,0x00737275,
	0x00060005,0x00000020,0x505f6c67,0x65567265,0x78657472,0x00000000,0x00060006,0x00000020,
	0x00000000,0x505f6c67,0x7469736f,0x006e6f69,0x00070006,0x00000020,0x00000001,0x505f6c67,
	0x746e696f,0x657a6953,0x00000000,0x00070006,0x00000020,0x00000002,0x435f6c67,0x4470696c,
	0x61747369,0x0065636e,0x00070006,0x00000020,0x00000003,0x435f6c67,0x446c6c75,0x61747369,
	0x0065636e,0x00030005,0x00000022,0x00000000,0x00060005,0x00000026,0x565f6c67,0x65747265,
	0x646e4978,0x00007865,0x00040005,0x00000032,0x6c6f4376,0x00000000,0x00050048,0x00000020,
	0x00000000,0x0000000b,0x00000000,0x00050048,0x00000020,0x00000001,0x0000000b,0x00000001,
	0x00050048,0x00000020,0x00000002,0x0000000b,0x00000003,0x00050048,0x00000020,0x00000003,
	0x0000000b,0x00000004,0x00030047,0x00000020,0x00000002,0x00040047,0x00000026,0x0000000b,
	0x0000002a,0x00040047,0x00000032,0x0000001e,0x00000000,0x00020013,0x00000002,0x00030021,
	0x00000003,0x00000002,0x00030016,0x00000006,0x00000020,0x00040017,0x00000007,0x00000006,
	0x00000002,0x00040015,0x00000008,0x00000020,0x00000000,0x0004002b,0x00000008,0x00000009,
	0x00000003,0x0004001c,0x0000000a,0x00000007,0x00000009,0x00040020,0x0000000b,0x00000006,
	0x0000000a,0x0004003b,0x0000000b,0x0000000c,0x00000006,0x0004002b,0x00000006,0x0000000d,
	0xbf800000,0x0005002c,0x00000007,0x0000000e,0x0000000d,0x0000000d,0x0004002b,0x00000006,
	0x0000000f,0x40400000,0x0005002c,0x00000007,0x00000010,0x0000000f,0x0000000d,0x0005002c,
	0x00000007,0x00000011,0x0000000d,0x0000000f,0x0006002c,0x0000000a,0x00000012,0x0000000e,
	0x00000010,0x00000011,0x00040017,0x00000013,0x00000006,0x00000003,0x0004001c,0x00000014,
	0x00000013,0x00000009,0x00040020,0x00000015,0x00000006,0x00000014,0x0004003b,0x00000015,
	0x00000016,0x00000006,0x0004002b,0x00000006,0x00000017,0x00000000,0x0006002c,0x00000013,
	0x00000018,0x00000017,0x00000017,0x00000017,0x0004002b,0x00000006,0x00000019,0x40000000,
	0x0006002c,0x00000013,0x0000001a,0x00000019,0x00000017,0x00000017,0x0006002c,0x00000013,
	0x0000001b,0x00000017,0x00000019,0x00000017,0x0006002c,0x00000014,0x0000001c,0x00000018,
	0x0000001a,0x0000001b,0x00040017,0x0000001d,0x00000006,0x00000004,0x0004002b,0x00000008,
	0x0000001e,0x00000001,0x0004001c,0x0000001f,0x00000006,0x0000001e,0x0006001e,0x00000020,
	0x0000001d,0x00000006,0x0000001f,0x0000001f,0x00040020,0x00000021,0x00000003,0x00000020,
	0x0004003b,0x00000021,0x00000022,0x00000003,0x00040015,0x00000023,0x00000020,0x00000001,
	0x0004002b,0x00000023,0x00000024,0x00000000,0x00040020,0x00000025,0x00000001,0x00000023,
	0x0004003b,0x00000025,0x00000026,0x00000001,0x00040020,0x00000028,0x00000006,0x00000007,
	0x0004002b,0x00000006,0x0000002b,0x3f800000,0x00040020,0x0000002f,0x00000003,0x0000001d,
	0x00040020,0x00000031,0x00000003,0x00000013,0x0004003b,0x00000031,0x00000032,0x00000003,
	0x00040020,0x00000034,0x00000006,0x00000013,0x00050036,0x00000002,0x00000004,0x00000000,
	0x00000003,0x000200f8,0x00000005,0x0003003e,0x0000000c,0x00000012,0x0003003e,0x00000016,
	0x0000001c,0x0004003d,0x00000023,0x00000027,0x00000026,0x00050041,0x00000028,0x00000029,
	0x0000000c,0x00000027,0x0004003d,0x00000007,0x0000002a,0x00000029,0x00050051,0x00000006,
	0x0000002c,0x0000002a,0x00000000,0x00050051,0x00000006,0x0000002d,0x0000002a,0x00000001,
	0x00070050,0x0000001d,0x0000002e,0x0000002c,0x0000002d,0x00000017,0x0000002b,0x00050041,
	0x0000002f,0x00000030,0x00000022,0x00000024,0x0003003e,0x00000030,0x0000002e,0x0004003d,
	0x00000023,0x00000033,0x00000026,0x00050041,0x00000034,0x00000035,0x00000016,0x00000033,
	0x0004003d,0x00000013,0x00000036,0x00000035,0x0003003e,0x00000032,0x00000036,0x000100fd,
	0x00010038
};

u32 testFrag[] = {
	0x07230203,0x00010000,0x00080008,0x0000021a,0x00000000,0x00020011,0x00000001,0x0006000b,
	0x00000001,0x4c534c47,0x6474732e,0x3035342e,0x00000000,0x0003000e,0x00000000,0x00000001,
	0x0007000f,0x00000004,0x00000004,0x6e69616d,0x00000000,0x0000020a,0x0000020c,0x00030010,
	0x00000004,0x00000007,0x00030003,0x00000002,0x000001c2,0x00040005,0x00000004,0x6e69616d,
	0x00000000,0x00050005,0x0000000b,0x2831324e,0x3b326676,0x00000000,0x00030005,0x0000000a,
	0x00000070,0x00070005,0x00000012,0x50746547,0x7628736f,0x763b3266,0x663b3266,0x00003b31,
	0x00030005,0x0000000f,0x00006469,0x00040005,0x00000010,0x7366666f,0x00000000,0x00030005,
	0x00000011,0x00000074,0x00080005,0x00000018,0x6c5f6664,0x28656e69,0x3b326676,0x3b326676,
	0x3b326676,0x00000000,0x00030005,0x00000015,0x00000061,0x00030005,0x00000016,0x00000062,
	0x00030005,0x00000017,0x00000070,0x00070005,0x0000001d,0x656e696c,0x32667628,0x3266763b,
	0x3266763b,0x0000003b,0x00030005,0x0000001a,0x00000061,0x00030005,0x0000001b,0x00000062,
	0x00030005,0x0000001c,0x00007675,0x00070005,0x00000023,0x4c74654e,0x72657961,0x32667628,
	0x3b31663b,0x003b3166,0x00030005,0x00000020,0x00007473,0x00030005,0x00000021,0x0000006e,
	0x00030005,0x00000022,0x00000074,0x00060005,0x00000028,0x6e69616d,0x67616d49,0x66762865,
	0x00003b32,0x00050005,0x00000027,0x67617266,0x726f6f43,0x00000064,0x00030005,0x0000002b,
	0x00000061,0x00030005,0x00000051,0x0000006e,0x00040005,0x00000055,0x61726170,0x0000006d,
	0x00030005,0x00000057,0x0000316e,0x00030005,0x0000005c,0x0000326e,0x00030005,0x00000061,
	0x00000061,0x00030005,0x00000074,0x00006170,0x00030005,0x00000078,0x00006162,0x00030005,
	0x0000007c,0x00000068,0x00030005,0x0000008f,0x00003172,0x00030005,0x00000091,0x00003272,
	0x00030005,0x00000093,0x00000064,0x00040005,0x00000094,0x61726170,0x0000006d,0x00040005,
	0x00000096,0x61726170,0x0000006d,0x00040005,0x00000098,0x61726170,0x0000006d,0x00030005,
	0x0000009b,0x00003264,0x00040005,0x000000a0,0x65646166,0x00000000,0x00030005,0x000000b6,
	0x00006469,0x00030005,0x000000c2,0x00000069,0x00030005,0x000000c4,0x00000079,0x00030005,
	0x000000ce,0x00000078,0x00030005,0x000000d9,0x00000070,0x00040005,0x000000e0,0x61726170,
	0x0000006d,0x00040005,0x000000e2,0x61726170,0x0000006d,0x00040005,0x000000e3,0x61726170,
	0x0000006d,0x00030005,0x000000eb,0x0000006d,0x00040005,0x000000ec,0x72617073,0x00656c6b,
	0x00030005,0x000000ed,0x00000069,0x00040005,0x000000f8,0x61726170,0x0000006d,0x00040005,
	0x000000fb,0x61726170,0x0000006d,0x00040005,0x000000fe,0x61726170,0x0000006d,0x00030005,
	0x00000103,0x00000064,0x00030005,0x0000010a,0x00000073,0x00040005,0x00000115,0x736c7570,
	0x00000065,0x00040005,0x00000133,0x61726170,0x0000006d,0x00040005,0x00000136,0x61726170,
	0x0000006d,0x00040005,0x00000139,0x61726170,0x0000006d,0x00040005,0x0000013f,0x61726170,
	0x0000006d,0x00040005,0x00000142,0x61726170,0x0000006d,0x00040005,0x00000145,0x61726170,
	0x0000006d,0x00040005,0x0000014b,0x61726170,0x0000006d,0x00040005,0x0000014e,0x61726170,
	0x0000006d,0x00040005,0x00000151,0x61726170,0x0000006d,0x00040005,0x00000156,0x61726170,
	0x0000006d,0x00040005,0x00000159,0x61726170,0x0000006d,0x00040005,0x0000015c,0x61726170,
	0x0000006d,0x00040005,0x00000161,0x61685073,0x00006573,0x00030005,0x00000180,0x00007675,
	0x00030005,0x00000182,0x0000004d,0x00030005,0x00000184,0x00000074,0x00050005,0x00000185,
	0x736e6f63,0x746e6174,0x00000073,0x00050006,0x00000185,0x00000000,0x656d6974,0x00000000,
	0x00030005,0x00000187,0x00000000,0x00030005,0x0000018c,0x00000073,0x00030005,0x0000018f,
	0x00000063,0x00030005,0x00000194,0x00746f72,0x00030005,0x0000019d,0x00007473,0x00030005,
	0x000001a6,0x0000006d,0x00030005,0x000001a7,0x00000069,0x00030005,0x000001af,0x0000007a,
	0x00040005,0x000001b4,0x657a6973,0x00000000,0x00040005,0x000001b8,0x65646166,0x00000000,
	0x00040005,0x000001c7,0x61726170,0x0000006d,0x00040005,0x000001c8,0x61726170,0x0000006d,
	0x00040005,0x000001ca,0x61726170,0x0000006d,0x00030005,0x000001d3,0x00746666,0x00040005,
	0x000001d4,0x776f6c67,0x00000000,0x00040005,0x000001db,0x65736162,0x006c6f43,0x00030005,
	0x000001e9,0x006c6f63,0x00040005,0x0000020a,0x6f6c6f63,0x00007275,0x00040005,0x0000020c,
	0x6c6f4376,0x00000000,0x00040005,0x00000214,0x61726170,0x0000006d,0x00050048,0x00000185,
	0x00000000,0x00000023,0x00000000,0x00030047,0x00000185,0x00000002,0x00040047,0x0000020a,
	0x0000001e,0x00000000,0x00040047,0x0000020c,0x0000001e,0x00000000,0x00020013,0x00000002,
	0x00030021,0x00000003,0x00000002,0x00030016,0x00000006,0x00000020,0x00040017,0x00000007,
	0x00000006,0x00000002,0x00040020,0x00000008,0x00000007,0x00000007,0x00040021,0x00000009,
	0x00000006,0x00000008,0x00040020,0x0000000d,0x00000007,0x00000006,0x00060021,0x0000000e,
	0x00000007,0x00000008,0x00000008,0x0000000d,0x00060021,0x00000014,0x00000006,0x00000008,
	0x00000008,0x00000008,0x00060021,0x0000001f,0x00000006,0x00000008,0x0000000d,0x0000000d,
	0x00040017,0x00000025,0x00000006,0x00000003,0x00040021,0x00000026,0x00000025,0x00000008,
	0x00040020,0x0000002a,0x00000007,0x00000025,0x0004002b,0x00000006,0x00000032,0x4355e5a2,
	0x0004002b,0x00000006,0x00000033,0x44235cfe,0x0004002b,0x00000006,0x00000034,0x437d1917,
	0x0006002c,0x00000025,0x00000035,0x00000032,0x00000033,0x00000034,0x0004002b,0x00000006,
	0x0000003b,0x429f851f,0x00040015,0x00000042,0x00000020,0x00000000,0x0004002b,0x00000042,
	0x00000043,0x00000000,0x0004002b,0x00000042,0x00000046,0x00000001,0x0004002b,0x00000042,
	0x0000004a,0x00000002,0x0004002b,0x00000006,0x00000059,0x41200000,0x0004002b,0x00000006,
	0x0000005e,0x42c80000,0x0004002b,0x00000006,0x0000006f,0x3ecccccd,0x0004002b,0x00000006,
	0x00000084,0x00000000,0x0004002b,0x00000006,0x00000085,0x3f800000,0x0004002b,0x00000006,
	0x00000090,0x3d23d70a,0x0004002b,0x00000006,0x00000092,0x3c23d70a,0x0004002b,0x00000006,
	0x000000a1,0x3fc00000,0x0004002b,0x00000006,0x000000a2,0x3f000000,0x0004002b,0x00000006,
	0x000000a5,0x3d4ccccd,0x0004002b,0x00000006,0x000000a6,0x3ca3d70a,0x0004002b,0x00000006,
	0x000000a8,0x3f400000,0x00040015,0x000000c0,0x00000020,0x00000001,0x00040020,0x000000c1,
	0x00000007,0x000000c0,0x0004002b,0x000000c0,0x000000c3,0x00000000,0x0004002b,0x00000006,
	0x000000c5,0xbf800000,0x00020014,0x000000cc,0x0004002b,0x00000042,0x000000d6,0x00000009,
	0x0004001c,0x000000d7,0x00000007,0x000000d6,0x00040020,0x000000d8,0x00000007,0x000000d7,
	0x0004002b,0x000000c0,0x000000db,0x00000001,0x0004002b,0x000000c0,0x000000f4,0x00000009,
	0x0004002b,0x000000c0,0x000000f6,0x00000004,0x0004002b,0x00000006,0x0000010b,0x3ba3d70a,
	0x0004002b,0x00000006,0x00000110,0x3f333333,0x0004002b,0x00000006,0x00000121,0x40a00000,
	0x0004002b,0x00000006,0x00000125,0x3f19999a,0x0004002b,0x00000006,0x00000128,0x41a00000,
	0x0004002b,0x000000c0,0x00000132,0x00000003,0x0004002b,0x000000c0,0x0000013e,0x00000005,
	0x0004002b,0x000000c0,0x0000014a,0x00000007,0x0004002b,0x00000006,0x00000167,0x3dcccccd,
	0x0004002b,0x00000006,0x0000016b,0x3e800000,0x0004002b,0x00000006,0x00000173,0x42480000,
	0x0005002c,0x00000007,0x00000183,0x00000084,0x00000084,0x0003001e,0x00000185,0x00000006,
	0x00040020,0x00000186,0x00000009,0x00000185,0x0004003b,0x00000186,0x00000187,0x00000009,
	0x00040020,0x00000188,0x00000009,0x00000006,0x00040018,0x00000192,0x00000007,0x00000002,
	0x00040020,0x00000193,0x00000007,0x00000192,0x0004002b,0x00000006,0x000001a2,0x40000000,
	0x0004002b,0x00000006,0x000001b5,0x41700000,0x0004002b,0x00000006,0x000001bb,0x3f4ccccd,
	0x0004002b,0x00000006,0x000001e1,0x3e75c28f,0x0004002b,0x00000006,0x000001fa,0x43660000,
	0x0004002b,0x00000006,0x000001fe,0x43600000,0x0004002b,0x00000006,0x000001ff,0x43480000,
	0x00040017,0x00000208,0x00000006,0x00000004,0x00040020,0x00000209,0x00000003,0x00000208,
	0x0004003b,0x00000209,0x0000020a,0x00000003,0x00040020,0x0000020b,0x00000001,0x00000025,
	0x0004003b,0x0000020b,0x0000020c,0x00000001,0x0004002b,0x00000006,0x00000211,0x3fe38e39,
	0x0005002c,0x00000007,0x00000212,0x00000211,0x00000085,0x00050036,0x00000002,0x00000004,
	0x00000000,0x00000003,0x000200f8,0x00000005,0x0004003b,0x00000008,0x00000214,0x00000007,
	0x0004003d,0x00000025,0x0000020d,0x0000020c,0x0007004f,0x00000007,0x0000020e,0x0000020d,
	0x0000020d,0x00000000,0x00000001,0x00050050,0x00000007,0x0000020f,0x000000a2,0x000000a2,
	0x00050083,0x00000007,0x00000210,0x0000020e,0x0000020f,0x00050085,0x00000007,0x00000213,
	0x00000210,0x00000212,0x0003003e,0x00000214,0x00000213,0x00050039,0x00000025,0x00000215,
	0x00000028,0x00000214,0x00050051,0x00000006,0x00000216,0x00000215,0x00000000,0x00050051,
	0x00000006,0x00000217,0x00000215,0x00000001,0x00050051,0x00000006,0x00000218,0x00000215,
	0x00000002,0x00070050,0x00000208,0x00000219,0x00000216,0x00000217,0x00000218,0x00000085,
	0x0003003e,0x0000020a,0x00000219,0x000100fd,0x00010038,0x00050036,0x00000006,0x0000000b,
	0x00000000,0x00000009,0x00030037,0x00000008,0x0000000a,0x000200f8,0x0000000c,0x0004003b,
	0x0000002a,0x0000002b,0x00000007,0x0004003d,0x00000007,0x0000002c,0x0000000a,0x0008004f,
	0x00000025,0x0000002d,0x0000002c,0x0000002c,0x00000000,0x00000001,0x00000000,0x00050051,
	0x00000006,0x0000002e,0x0000002d,0x00000000,0x00050051,0x00000006,0x0000002f,0x0000002d,
	0x00000001,0x00050051,0x00000006,0x00000030,0x0000002d,0x00000002,0x00060050,0x00000025,
	0x00000031,0x0000002e,0x0000002f,0x00000030,0x00050085,0x00000025,0x00000036,0x00000031,
	0x00000035,0x0006000c,0x00000025,0x00000037,0x00000001,0x0000000a,0x00000036,0x0003003e,
	0x0000002b,0x00000037,0x0004003d,0x00000025,0x00000038,0x0000002b,0x0004003d,0x00000025,
	0x00000039,0x0000002b,0x0008004f,0x00000025,0x0000003a,0x00000039,0x00000039,0x00000001,
	0x00000002,0x00000000,0x00060050,0x00000025,0x0000003c,0x0000003b,0x0000003b,0x0000003b,
	0x00050081,0x00000025,0x0000003d,0x0000003a,0x0000003c,0x00050094,0x00000006,0x0000003e,
	0x00000038,0x0000003d,0x0004003d,0x00000025,0x0000003f,0x0000002b,0x00060050,0x00000025,
	0x00000040,0x0000003e,0x0000003e,0x0000003e,0x00050081,0x00000025,0x00000041,0x0000003f,
	0x00000040,0x0003003e,0x0000002b,0x00000041,0x00050041,0x0000000d,0x00000044,0x0000002b,
	0x00000043,0x0004003d,0x00000006,0x00000045,0x00000044,0x00050041,0x0000000d,0x00000047,
	0x0000002b,0x00000046,0x0004003d,0x00000006,0x00000048,0x00000047,0x00050081,0x00000006,
	0x00000049,0x00000045,0x00000048,0x00050041,0x0000000d,0x0000004b,0x0000002b,0x0000004a,
	0x0004003d,0x00000006,0x0000004c,0x0000004b,0x00050085,0x00000006,0x0000004d,0x00000049,
	0x0000004c,0x0006000c,0x00000006,0x0000004e,0x00000001,0x0000000a,0x0000004d,0x000200fe,
	0x0000004e,0x00010038,0x00050036,0x00000007,0x00000012,0x00000000,0x0000000e,0x00030037,
	0x00000008,0x0000000f,0x00030037,0x00000008,0x00000010,0x00030037,0x0000000d,0x00000011,
	0x000200f8,0x00000013,0x0004003b,0x0000000d,0x00000051,0x00000007,0x0004003b,0x00000008,
	0x00000055,0x00000007,0x0004003b,0x0000000d,0x00000057,0x00000007,0x0004003b,0x0000000d,
	0x0000005c,0x00000007,0x0004003b,0x0000000d,0x00000061,0x00000007,0x0004003d,0x00000007,
	0x00000052,0x0000000f,0x0004003d,0x00000007,0x00000053,0x00000010,0x00050081,0x00000007,
	0x00000054,0x00000052,0x00000053,0x0003003e,0x00000055,0x00000054,0x00050039,0x00000006,
	0x00000056,0x0000000b,0x00000055,0x0003003e,0x00000051,0x00000056,0x0004003d,0x00000006,
	0x00000058,0x00000051,0x00050085,0x00000006,0x0000005a,0x00000058,0x00000059,0x0006000c,
	0x00000006,0x0000005b,0x00000001,0x0000000a,0x0000005a,0x0003003e,0x00000057,0x0000005b,
	0x0004003d,0x00000006,0x0000005d,0x00000051,0x00050085,0x00000006,0x0000005f,0x0000005d,
	0x0000005e,0x0006000c,0x00000006,0x00000060,0x00000001,0x0000000a,0x0000005f,0x0003003e,
	0x0000005c,0x00000060,0x0004003d,0x00000006,0x00000062,0x00000011,0x0004003d,0x00000006,
	0x00000063,0x00000051,0x00050081,0x00000006,0x00000064,0x00000062,0x00000063,0x0003003e,
	0x00000061,0x00000064,0x0004003d,0x00000007,0x00000065,0x00000010,0x0004003d,0x00000006,
	0x00000066,0x00000061,0x0004003d,0x00000006,0x00000067,0x00000057,0x00050085,0x00000006,
	0x00000068,0x00000066,0x00000067,0x0006000c,0x00000006,0x00000069,0x00000001,0x0000000d,
	0x00000068,0x0004003d,0x00000006,0x0000006a,0x00000061,0x0004003d,0x00000006,0x0000006b,
	0x0000005c,0x00050085,0x00000006,0x0000006c,0x0000006a,0x0000006b,0x0006000c,0x00000006,
	0x0000006d,0x00000001,0x0000000e,0x0000006c,0x00050050,0x00000007,0x0000006e,0x00000069,
	0x0000006d,0x0005008e,0x00000007,0x00000070,0x0000006e,0x0000006f,0x00050081,0x00000007,
	0x00000071,0x00000065,0x00000070,0x000200fe,0x00000071,0x00010038,0x00050036,0x00000006,
	0x00000018,0x00000000,0x00000014,0x00030037,0x00000008,0x00000015,0x00030037,0x00000008,
	0x00000016,0x00030037,0x00000008,0x00000017,0x000200f8,0x00000019,0x0004003b,0x00000008,
	0x00000074,0x00000007,0x0004003b,0x00000008,0x00000078,0x00000007,0x0004003b,0x0000000d,
	0x0000007c,0x00000007,0x0004003d,0x00000007,0x00000075,0x00000017,0x0004003d,0x00000007,
	0x00000076,0x00000015,0x00050083,0x00000007,0x00000077,0x00000075,0x00000076,0x0003003e,
	0x00000074,0x00000077,0x0004003d,0x00000007,0x00000079,0x00000016,0x0004003d,0x00000007,
	0x0000007a,0x00000015,0x00050083,0x00000007,0x0000007b,0x00000079,0x0000007a,0x0003003e,
	0x00000078,0x0000007b,0x0004003d,0x00000007,0x0000007d,0x00000074,0x0004003d,0x00000007,
	0x0000007e,0x00000078,0x00050094,0x00000006,0x0000007f,0x0000007d,0x0000007e,0x0004003d,
	0x00000007,0x00000080,0x00000078,0x0004003d,0x00000007,0x00000081,0x00000078,0x00050094,
	0x00000006,0x00000082,0x00000080,0x00000081,0x00050088,0x00000006,0x00000083,0x0000007f,
	0x00000082,0x0008000c,0x00000006,0x00000086,0x00000001,0x0000002b,0x00000083,0x00000084,
	0x00000085,0x0003003e,0x0000007c,0x00000086,0x0004003d,0x00000007,0x00000087,0x00000074,
	0x0004003d,0x00000007,0x00000088,0x00000078,0x0004003d,0x00000006,0x00000089,0x0000007c,
	0x0005008e,0x00000007,0x0000008a,0x00000088,0x00000089,0x00050083,0x00000007,0x0000008b,
	0x00000087,0x0000008a,0x0006000c,0x00000006,0x0000008c,0x00000001,0x00000042,0x0000008b,
	0x000200fe,0x0000008c,0x00010038,0x00050036,0x00000006,0x0000001d,0x00000000,0x00000014,
	0x00030037,0x00000008,0x0000001a,0x00030037,0x00000008,0x0000001b,0x00030037,0x00000008,
	0x0000001c,0x000200f8,0x0000001e,0x0004003b,0x0000000d,0x0000008f,0x00000007,0x0004003b,
	0x0000000d,0x00000091,0x00000007,0x0004003b,0x0000000d,0x00000093,0x00000007,0x0004003b,
	0x00000008,0x00000094,0x00000007,0x0004003b,0x00000008,0x00000096,0x00000007,0x0004003b,
	0x00000008,0x00000098,0x00000007,0x0004003b,0x0000000d,0x0000009b,0x00000007,0x0004003b,
	0x0000000d,0x000000a0,0x00000007,0x0003003e,0x0000008f,0x00000090,0x0003003e,0x00000091,
	0x00000092,0x0004003d,0x00000007,0x00000095,0x0000001a,0x0003003e,0x00000094,0x00000095,
	0x0004003d,0x00000007,0x00000097,0x0000001b,0x0003003e,0x00000096,0x00000097,0x0004003d,
	0x00000007,0x00000099,0x0000001c,0x0003003e,0x00000098,0x00000099,0x00070039,0x00000006,
	0x0000009a,0x00000018,0x00000094,0x00000096,0x00000098,0x0003003e,0x00000093,0x0000009a,
	0x0004003d,0x00000007,0x0000009c,0x0000001a,0x0004003d,0x00000007,0x0000009d,0x0000001b,
	0x00050083,0x00000007,0x0000009e,0x0000009c,0x0000009d,0x0006000c,0x00000006,0x0000009f,
	0x00000001,0x00000042,0x0000009e,0x0003003e,0x0000009b,0x0000009f,0x0004003d,0x00000006,
	0x000000a3,0x0000009b,0x0008000c,0x00000006,0x000000a4,0x00000001,0x00000031,0x000000a1,
	0x000000a2,0x000000a3,0x0003003e,0x000000a0,0x000000a4,0x0004003d,0x00000006,0x000000a7,
	0x0000009b,0x00050083,0x00000006,0x000000a9,0x000000a7,0x000000a8,0x0006000c,0x00000006,
	0x000000aa,0x00000001,0x00000004,0x000000a9,0x0008000c,0x00000006,0x000000ab,0x00000001,
	0x00000031,0x000000a5,0x000000a6,0x000000aa,0x0004003d,0x00000006,0x000000ac,0x000000a0,
	0x00050081,0x00000006,0x000000ad,0x000000ac,0x000000ab,0x0003003e,0x000000a0,0x000000ad,
	0x0004003d,0x00000006,0x000000ae,0x0000008f,0x0004003d,0x00000006,0x000000af,0x00000091,
	0x0004003d,0x00000006,0x000000b0,0x00000093,0x0008000c,0x00000006,0x000000b1,0x00000001,
	0x00000031,0x000000ae,0x000000af,0x000000b0,0x0004003d,0x00000006,0x000000b2,0x000000a0,
	0x00050085,0x00000006,0x000000b3,0x000000b1,0x000000b2,0x000200fe,0x000000b3,0x00010038,
	0x00050036,0x00000006,0x00000023,0x00000000,0x0000001f,0x00030037,0x00000008,0x00000020,
	0x00030037,0x0000000d,0x00000021,0x00030037,0x0000000d,0x00000022,0x000200f8,0x00000024,
	0x0004003b,0x00000008,0x000000b6,0x00000007,0x0004003b,0x000000c1,0x000000c2,0x00000007,
	0x0004003b,0x0000000d,0x000000c4,0x00000007,0x0004003b,0x0000000d,0x000000ce,0x00000007,
	0x0004003b,0x000000d8,0x000000d9,0x00000007,0x0004003b,0x00000008,0x000000e0,0x00000007,
	0x0004003b,0x00000008,0x000000e2,0x00000007,0x0004003b,0x0000000d,0x000000e3,0x00000007,
	0x0004003b,0x0000000d,0x000000eb,0x00000007,0x0004003b,0x0000000d,0x000000ec,0x00000007,
	0x0004003b,0x000000c1,0x000000ed,0x00000007,0x0004003b,0x00000008,0x000000f8,0x00000007,
	0x0004003b,0x00000008,0x000000fb,0x00000007,0x0004003b,0x00000008,0x000000fe,0x00000007,
	0x0004003b,0x0000000d,0x00000103,0x00000007,0x0004003b,0x0000000d,0x0000010a,0x00000007,
	0x0004003b,0x0000000d,0x00000115,0x00000007,0x0004003b,0x00000008,0x00000133,0x00000007,
	0x0004003b,0x00000008,0x00000136,0x00000007,0x0004003b,0x00000008,0x00000139,0x00000007,
	0x0004003b,0x00000008,0x0000013f,0x00000007,0x0004003b,0x00000008,0x00000142,0x00000007,
	0x0004003b,0x00000008,0x00000145,0x00000007,0x0004003b,0x00000008,0x0000014b,0x00000007,
	0x0004003b,0x00000008,0x0000014e,0x00000007,0x0004003b,0x00000008,0x00000151,0x00000007,
	0x0004003b,0x00000008,0x00000156,0x00000007,0x0004003b,0x00000008,0x00000159,0x00000007,
	0x0004003b,0x00000008,0x0000015c,0x00000007,0x0004003b,0x0000000d,0x00000161,0x00000007,
	0x0004003d,0x00000007,0x000000b7,0x00000020,0x0006000c,0x00000007,0x000000b8,0x00000001,
	0x00000008,0x000000b7,0x0004003d,0x00000006,0x000000b9,0x00000021,0x00050050,0x00000007,
	0x000000ba,0x000000b9,0x000000b9,0x00050081,0x00000007,0x000000bb,0x000000b8,0x000000ba,
	0x0003003e,0x000000b6,0x000000bb,0x0004003d,0x00000007,0x000000bc,0x00000020,0x0006000c,
	0x00000007,0x000000bd,0x00000001,0x0000000a,0x000000bc,0x00050050,0x00000007,0x000000be,
	0x000000a2,0x000000a2,0x00050083,0x00000007,0x000000bf,0x000000bd,0x000000be,0x0003003e,
	0x00000020,0x000000bf,0x0003003e,0x000000c2,0x000000c3,0x0003003e,0x000000c4,0x000000c5,
	0x000200f9,0x000000c6,0x000200f8,0x000000c6,0x000400f6,0x000000c8,0x000000c9,0x00000000,
	0x000200f9,0x000000ca,0x000200f8,0x000000ca,0x0004003d,0x00000006,0x000000cb,0x000000c4,
	0x000500bc,0x000000cc,0x000000cd,0x000000cb,0x00000085,0x000400fa,0x000000cd,0x000000c7,
	0x000000c8,0x000200f8,0x000000c7,0x0003003e,0x000000ce,0x000000c5,0x000200f9,0x000000cf,
	0x000200f8,0x000000cf,0x000400f6,0x000000d1,0x000000d2,0x00000000,0x000200f9,0x000000d3,
	0x000200f8,0x000000d3,0x0004003d,0x00000006,0x000000d4,0x000000ce,0x000500bc,0x000000cc,
	0x000000d5,0x000000d4,0x00000085,0x000400fa,0x000000d5,0x000000d0,0x000000d1,0x000200f8,
	0x000000d0,0x0004003d,0x000000c0,0x000000da,0x000000c2,0x00050080,0x000000c0,0x000000dc,
	0x000000da,0x000000db,0x0003003e,0x000000c2,0x000000dc,0x0004003d,0x00000006,0x000000dd,
	0x000000ce,0x0004003d,0x00000006,0x000000de,0x000000c4,0x00050050,0x00000007,0x000000df,
	0x000000dd,0x000000de,0x0004003d,0x00000007,0x000000e1,0x000000b6,0x0003003e,0x000000e0,
	0x000000e1,0x0003003e,0x000000e2,0x000000df,0x0004003d,0x00000006,0x000000e4,0x00000022,
	0x0003003e,0x000000e3,0x000000e4,0x00070039,0x00000007,0x000000e5,0x00000012,0x000000e0,
	0x000000e2,0x000000e3,0x00050041,0x00000008,0x000000e6,0x000000d9,0x000000da,0x0003003e,
	0x000000e6,0x000000e5,0x000200f9,0x000000d2,0x000200f8,0x000000d2,0x0004003d,0x00000006,
	0x000000e7,0x000000ce,0x00050081,0x00000006,0x000000e8,0x000000e7,0x00000085,0x0003003e,
	0x000000ce,0x000000e8,0x000200f9,0x000000cf,0x000200f8,0x000000d1,0x000200f9,0x000000c9,
	0x000200f8,0x000000c9,0x0004003d,0x00000006,0x000000e9,0x000000c4,0x00050081,0x00000006,
	0x000000ea,0x000000e9,0x00000085,0x0003003e,0x000000c4,0x000000ea,0x000200f9,0x000000c6,
	0x000200f8,0x000000c8,0x0003003e,0x000000eb,0x00000084,0x0003003e,0x000000ec,0x00000084,
	0x0003003e,0x000000ed,0x000000c3,0x000200f9,0x000000ee,0x000200f8,0x000000ee,0x000400f6,
	0x000000f0,0x000000f1,0x00000000,0x000200f9,0x000000f2,0x000200f8,0x000000f2,0x0004003d,
	0x000000c0,0x000000f3,0x000000ed,0x000500b1,0x000000cc,0x000000f5,0x000000f3,0x000000f4,
	0x000400fa,0x000000f5,0x000000ef,0x000000f0,0x000200f8,0x000000ef,0x0004003d,0x000000c0,
	0x000000f7,0x000000ed,0x00050041,0x00000008,0x000000f9,0x000000d9,0x000000f6,0x0004003d,
	0x00000007,0x000000fa,0x000000f9,0x0003003e,0x000000f8,0x000000fa,0x00050041,0x00000008,
	0x000000fc,0x000000d9,0x000000f7,0x0004003d,0x00000007,0x000000fd,0x000000fc,0x0003003e,
	0x000000fb,0x000000fd,0x0004003d,0x00000007,0x000000ff,0x00000020,0x0003003e,0x000000fe,
	0x000000ff,0x00070039,0x00000006,0x00000100,0x0000001d,0x000000f8,0x000000fb,0x000000fe,
	0x0004003d,0x00000006,0x00000101,0x000000eb,0x00050081,0x00000006,0x00000102,0x00000101,
	0x00000100,0x0003003e,0x000000eb,0x00000102,0x0004003d,0x00000007,0x00000104,0x00000020,
	0x0004003d,0x000000c0,0x00000105,0x000000ed,0x00050041,0x00000008,0x00000106,0x000000d9,
	0x00000105,0x0004003d,0x00000007,0x00000107,0x00000106,0x00050083,0x00000007,0x00000108,
	0x00000104,0x00000107,0x0006000c,0x00000006,0x00000109,0x00000001,0x00000042,0x00000108,
	0x0003003e,0x00000103,0x00000109,0x0004003d,0x00000006,0x0000010c,0x00000103,0x0004003d,
	0x00000006,0x0000010d,0x00000103,0x00050085,0x00000006,0x0000010e,0x0000010c,0x0000010d,
	0x00050088,0x00000006,0x0000010f,0x0000010b,0x0000010e,0x0003003e,0x0000010a,0x0000010f,
	0x0004003d,0x00000006,0x00000111,0x00000103,0x0008000c,0x00000006,0x00000112,0x00000001,
	0x00000031,0x00000085,0x00000110,0x00000111,0x0004003d,0x00000006,0x00000113,0x0000010a,
	0x00050085,0x00000006,0x00000114,0x00000113,0x00000112,0x0003003e,0x0000010a,0x00000114,
	0x0004003d,0x000000c0,0x00000116,0x000000ed,0x00060041,0x0000000d,0x00000117,0x000000d9,
	0x00000116,0x00000043,0x0004003d,0x00000006,0x00000118,0x00000117,0x0006000c,0x00000006,
	0x00000119,0x00000001,0x0000000a,0x00000118,0x0004003d,0x000000c0,0x0000011a,0x000000ed,
	0x00060041,0x0000000d,0x0000011b,0x000000d9,0x0000011a,0x00000046,0x0004003d,0x00000006,
	0x0000011c,0x0000011b,0x0006000c,0x00000006,0x0000011d,0x00000001,0x0000000a,0x0000011c,
	0x00050081,0x00000006,0x0000011e,0x00000119,0x0000011d,0x0004003d,0x00000006,0x0000011f,
	0x00000022,0x00050081,0x00000006,0x00000120,0x0000011e,0x0000011f,0x00050085,0x00000006,
	0x00000122,0x00000120,0x00000121,0x0006000c,0x00000006,0x00000123,0x00000001,0x0000000d,
	0x00000122,0x00050085,0x00000006,0x00000124,0x00000123,0x0000006f,0x00050081,0x00000006,
	0x00000126,0x00000124,0x00000125,0x0003003e,0x00000115,0x00000126,0x0004003d,0x00000006,
	0x00000127,0x00000115,0x0007000c,0x00000006,0x00000129,0x00000001,0x0000001a,0x00000127,
	0x00000128,0x0003003e,0x00000115,0x00000129,0x0004003d,0x00000006,0x0000012a,0x00000115,
	0x0004003d,0x00000006,0x0000012b,0x0000010a,0x00050085,0x00000006,0x0000012c,0x0000012b,
	0x0000012a,0x0003003e,0x0000010a,0x0000012c,0x0004003d,0x00000006,0x0000012d,0x0000010a,
	0x0004003d,0x00000006,0x0000012e,0x000000ec,0x00050081,0x00000006,0x0000012f,0x0000012e,
	0x0000012d,0x0003003e,0x000000ec,0x0000012f,0x000200f9,0x000000f1,0x000200f8,0x000000f1,
	0x0004003d,0x000000c0,0x00000130,0x000000ed,0x00050080,0x000000c0,0x00000131,0x00000130,
	0x000000db,0x0003003e,0x000000ed,0x00000131,0x000200f9,0x000000ee,0x000200f8,0x000000f0,
	0x00050041,0x00000008,0x00000134,0x000000d9,0x000000db,0x0004003d,0x00000007,0x00000135,
	0x00000134,0x0003003e,0x00000133,0x00000135,0x00050041,0x00000008,0x00000137,0x000000d9,
	0x00000132,0x0004003d,0x00000007,0x00000138,0x00000137,0x0003003e,0x00000136,0x00000138,
	0x0004003d,0x00000007,0x0000013a,0x00000020,0x0003003e,0x00000139,0x0000013a,0x00070039,
	0x00000006,0x0000013b,0x0000001d,0x00000133,0x00000136,0x00000139,0x0004003d,0x00000006,
	0x0000013c,0x000000eb,0x00050081,0x00000006,0x0000013d,0x0000013c,0x0000013b,0x0003003e,
	0x000000eb,0x0000013d,0x00050041,0x00000008,0x00000140,0x000000d9,0x000000db,0x0004003d,
	0x00000007,0x00000141,0x00000140,0x0003003e,0x0000013f,0x00000141,0x00050041,0x00000008,
	0x00000143,0x000000d9,0x0000013e,0x0004003d,0x00000007,0x00000144,0x00000143,0x0003003e,
	0x00000142,0x00000144,0x0004003d,0x00000007,0x00000146,0x00000020,0x0003003e,0x00000145,
	0x00000146,0x00070039,0x00000006,0x00000147,0x0000001d,0x0000013f,0x00000142,0x00000145,
	0x0004003d,0x00000006,0x00000148,0x000000eb,0x00050081,0x00000006,0x00000149,0x00000148,
	0x00000147,0x0003003e,0x000000eb,0x00000149,0x00050041,0x00000008,0x0000014c,0x000000d9,
	0x0000014a,0x0004003d,0x00000007,0x0000014d,0x0000014c,0x0003003e,0x0000014b,0x0000014d,
	0x00050041,0x00000008,0x0000014f,0x000000d9,0x0000013e,0x0004003d,0x00000007,0x00000150,
	0x0000014f,0x0003003e,0x0000014e,0x00000150,0x0004003d,0x00000007,0x00000152,0x00000020,
	0x0003003e,0x00000151,0x00000152,0x00070039,0x00000006,0x00000153,0x0000001d,0x0000014b,
	0x0000014e,0x00000151,0x0004003d,0x00000006,0x00000154,0x000000eb,0x00050081,0x00000006,
	0x00000155,0x00000154,0x00000153,0x0003003e,0x000000eb,0x00000155,0x00050041,0x00000008,
	0x00000157,0x000000d9,0x0000014a,0x0004003d,0x00000007,0x00000158,0x00000157,0x0003003e,
	0x00000156,0x00000158,0x00050041,0x00000008,0x0000015a,0x000000d9,0x00000132,0x0004003d,
	0x00000007,0x0000015b,0x0000015a,0x0003003e,0x00000159,0x0000015b,0x0004003d,0x00000007,
	0x0000015d,0x00000020,0x0003003e,0x0000015c,0x0000015d,0x00070039,0x00000006,0x0000015e,
	0x0000001d,0x00000156,0x00000159,0x0000015c,0x0004003d,0x00000006,0x0000015f,0x000000eb,
	0x00050081,0x00000006,0x00000160,0x0000015f,0x0000015e,0x0003003e,0x000000eb,0x00000160,
	0x0004003d,0x00000006,0x00000162,0x00000022,0x0004003d,0x00000006,0x00000163,0x00000021,
	0x00050081,0x00000006,0x00000164,0x00000162,0x00000163,0x0006000c,0x00000006,0x00000165,
	0x00000001,0x0000000d,0x00000164,0x0004003d,0x00000006,0x00000166,0x00000022,0x00050085,
	0x00000006,0x00000168,0x00000166,0x00000167,0x0006000c,0x00000006,0x00000169,0x00000001,
	0x0000000d,0x00000168,0x00050081,0x00000006,0x0000016a,0x00000165,0x00000169,0x00050085,
	0x00000006,0x0000016c,0x0000016a,0x0000016b,0x00050081,0x00000006,0x0000016d,0x0000016c,
	0x000000a2,0x0003003e,0x00000161,0x0000016d,0x0004003d,0x00000006,0x0000016e,0x00000022,
	0x00050085,0x00000006,0x0000016f,0x0000016e,0x00000167,0x0006000c,0x00000006,0x00000170,
	0x00000001,0x0000000d,0x0000016f,0x00050085,0x00000006,0x00000171,0x00000170,0x000000a2,
	0x00050081,0x00000006,0x00000172,0x00000171,0x000000a2,0x0007000c,0x00000006,0x00000174,
	0x00000001,0x0000001a,0x00000172,0x00000173,0x00050085,0x00000006,0x00000175,0x00000174,
	0x00000121,0x0004003d,0x00000006,0x00000176,0x00000161,0x00050081,0x00000006,0x00000177,
	0x00000176,0x00000175,0x0003003e,0x00000161,0x00000177,0x0004003d,0x00000006,0x00000178,
	0x000000ec,0x0004003d,0x00000006,0x00000179,0x00000161,0x00050085,0x00000006,0x0000017a,
	0x00000178,0x00000179,0x0004003d,0x00000006,0x0000017b,0x000000eb,0x00050081,0x00000006,
	0x0000017c,0x0000017b,0x0000017a,0x0003003e,0x000000eb,0x0000017c,0x0004003d,0x00000006,
	0x0000017d,0x000000eb,0x000200fe,0x0000017d,0x00010038,0x00050036,0x00000025,0x00000028,
	0x00000000,0x00000026,0x00030037,0x00000008,0x00000027,0x000200f8,0x00000029,0x0004003b,
	0x00000008,0x00000180,0x00000007,0x0004003b,0x00000008,0x00000182,0x00000007,0x0004003b,
	0x0000000d,0x00000184,0x00000007,0x0004003b,0x0000000d,0x0000018c,0x00000007,0x0004003b,
	0x0000000d,0x0000018f,0x00000007,0x0004003b,0x00000193,0x00000194,0x00000007,0x0004003b,
	0x00000008,0x0000019d,0x00000007,0x0004003b,0x0000000d,0x000001a6,0x00000007,0x0004003b,
	0x0000000d,0x000001a7,0x00000007,0x0004003b,0x0000000d,0x000001af,0x00000007,0x0004003b,
	0x0000000d,0x000001b4,0x00000007,0x0004003b,0x0000000d,0x000001b8,0x00000007,0x0004003b,
	0x00000008,0x000001c7,0x00000007,0x0004003b,0x0000000d,0x000001c8,0x00000007,0x0004003b,
	0x0000000d,0x000001ca,0x00000007,0x0004003b,0x0000000d,0x000001d3,0x00000007,0x0004003b,
	0x0000000d,0x000001d4,0x00000007,0x0004003b,0x0000002a,0x000001db,0x00000007,0x0004003b,
	0x0000002a,0x000001e9,0x00000007,0x0004003d,0x00000007,0x00000181,0x00000027,0x0003003e,
	0x00000180,0x00000181,0x0003003e,0x00000182,0x00000183,0x00050041,0x00000188,0x00000189,
	0x00000187,0x000000c3,0x0004003d,0x00000006,0x0000018a,0x00000189,0x00050085,0x00000006,
	0x0000018b,0x0000018a,0x00000167,0x0003003e,0x00000184,0x0000018b,0x0004003d,0x00000006,
	0x0000018d,0x00000184,0x0006000c,0x00000006,0x0000018e,0x00000001,0x0000000d,0x0000018d,
	0x0003003e,0x0000018c,0x0000018e,0x0004003d,0x00000006,0x00000190,0x00000184,0x0006000c,
	0x00000006,0x00000191,0x00000001,0x0000000e,0x00000190,0x0003003e,0x0000018f,0x00000191,
	0x0004003d,0x00000006,0x00000195,0x0000018f,0x0004003d,0x00000006,0x00000196,0x0000018c,
	0x0004007f,0x00000006,0x00000197,0x00000196,0x0004003d,0x00000006,0x00000198,0x0000018c,
	0x0004003d,0x00000006,0x00000199,0x0000018f,0x00050050,0x00000007,0x0000019a,0x00000195,
	0x00000197,0x00050050,0x00000007,0x0000019b,0x00000198,0x00000199,0x00050050,0x00000192,
	0x0000019c,0x0000019a,0x0000019b,0x0003003e,0x00000194,0x0000019c,0x0004003d,0x00000007,
	0x0000019e,0x00000180,0x0004003d,0x00000192,0x0000019f,0x00000194,0x00050090,0x00000007,
	0x000001a0,0x0000019e,0x0000019f,0x0003003e,0x0000019d,0x000001a0,0x0004003d,0x00000192,
	0x000001a1,0x00000194,0x0005008f,0x00000192,0x000001a3,0x000001a1,0x000001a2,0x0004003d,
	0x00000007,0x000001a4,0x00000182,0x00050090,0x00000007,0x000001a5,0x000001a4,0x000001a3,
	0x0003003e,0x00000182,0x000001a5,0x0003003e,0x000001a6,0x00000084,0x0003003e,0x000001a7,
	0x00000084,0x000200f9,0x000001a8,0x000200f8,0x000001a8,0x000400f6,0x000001aa,0x000001ab,
	0x00000000,0x000200f9,0x000001ac,0x000200f8,0x000001ac,0x0004003d,0x00000006,0x000001ad,
	0x000001a7,0x000500b8,0x000000cc,0x000001ae,0x000001ad,0x00000085,0x000400fa,0x000001ae,
	0x000001a9,0x000001aa,0x000200f8,0x000001a9,0x0004003d,0x00000006,0x000001b0,0x00000184,
	0x0004003d,0x00000006,0x000001b1,0x000001a7,0x00050081,0x00000006,0x000001b2,0x000001b0,
	0x000001b1,0x0006000c,0x00000006,0x000001b3,0x00000001,0x0000000a,0x000001b2,0x0003003e,
	0x000001af,0x000001b3,0x0004003d,0x00000006,0x000001b6,0x000001af,0x0008000c,0x00000006,
	0x000001b7,0x00000001,0x0000002e,0x000001b5,0x00000085,0x000001b6,0x0003003e,0x000001b4,
	0x000001b7,0x0004003d,0x00000006,0x000001b9,0x000001af,0x0008000c,0x00000006,0x000001ba,
	0x00000001,0x00000031,0x00000084,0x00000125,0x000001b9,0x0004003d,0x00000006,0x000001bc,
	0x000001af,0x0008000c,0x00000006,0x000001bd,0x00000001,0x00000031,0x00000085,0x000001bb,
	0x000001bc,0x00050085,0x00000006,0x000001be,0x000001ba,0x000001bd,0x0003003e,0x000001b8,
	0x000001be,0x0004003d,0x00000006,0x000001bf,0x000001b8,0x0004003d,0x00000007,0x000001c0,
	0x0000019d,0x0004003d,0x00000006,0x000001c1,0x000001b4,0x0005008e,0x00000007,0x000001c2,
	0x000001c0,0x000001c1,0x0004003d,0x00000007,0x000001c3,0x00000182,0x0004003d,0x00000006,
	0x000001c4,0x000001af,0x0005008e,0x00000007,0x000001c5,0x000001c3,0x000001c4,0x00050083,
	0x00000007,0x000001c6,0x000001c2,0x000001c5,0x0003003e,0x000001c7,0x000001c6,0x0004003d,
	0x00000006,0x000001c9,0x000001a7,0x0003003e,0x000001c8,0x000001c9,0x00050041,0x00000188,
	0x000001cb,0x00000187,0x000000c3,0x0004003d,0x00000006,0x000001cc,0x000001cb,0x0003003e,
	0x000001ca,0x000001cc,0x00070039,0x00000006,0x000001cd,0x00000023,0x000001c7,0x000001c8,
	0x000001ca,0x00050085,0x00000006,0x000001ce,0x000001bf,0x000001cd,0x0004003d,0x00000006,
	0x000001cf,0x000001a6,0x00050081,0x00000006,0x000001d0,0x000001cf,0x000001ce,0x0003003e,
	0x000001a6,0x000001d0,0x000200f9,0x000001ab,0x000200f8,0x000001ab,0x0004003d,0x00000006,
	0x000001d1,0x000001a7,0x00050081,0x00000006,0x000001d2,0x000001d1,0x0000016b,0x0003003e,
	0x000001a7,0x000001d2,0x000200f9,0x000001a8,0x000200f8,0x000001aa,0x0003003e,0x000001d3,
	0x00000084,0x00050041,0x0000000d,0x000001d5,0x00000180,0x00000046,0x0004003d,0x00000006,
	0x000001d6,0x000001d5,0x0004007f,0x00000006,0x000001d7,0x000001d6,0x0004003d,0x00000006,
	0x000001d8,0x000001d3,0x00050085,0x00000006,0x000001d9,0x000001d7,0x000001d8,0x00050085,
	0x00000006,0x000001da,0x000001d9,0x000001a2,0x0003003e,0x000001d4,0x000001da,0x0004003d,
	0x00000006,0x000001dc,0x0000018c,0x0004003d,0x00000006,0x000001dd,0x00000184,0x00050085,
	0x00000006,0x000001de,0x000001dd,0x0000006f,0x0006000c,0x00000006,0x000001df,0x00000001,
	0x0000000e,0x000001de,0x0004003d,0x00000006,0x000001e0,0x00000184,0x00050085,0x00000006,
	0x000001e2,0x000001e0,0x000001e1,0x0006000c,0x00000006,0x000001e3,0x00000001,0x0000000d,
	0x000001e2,0x0004007f,0x00000006,0x000001e4,0x000001e3,0x00060050,0x00000025,0x000001e5,
	0x000001dc,0x000001df,0x000001e4,0x0005008e,0x00000025,0x000001e6,0x000001e5,0x0000006f,
	0x00060050,0x00000025,0x000001e7,0x00000125,0x00000125,0x00000125,0x00050081,0x00000025,
	0x000001e8,0x000001e6,0x000001e7,0x0003003e,0x000001db,0x000001e8,0x0004003d,0x00000025,
	0x000001ea,0x000001db,0x0004003d,0x00000006,0x000001eb,0x000001a6,0x0005008e,0x00000025,
	0x000001ec,0x000001ea,0x000001eb,0x0003003e,0x000001e9,0x000001ec,0x0004003d,0x00000025,
	0x000001ed,0x000001db,0x0004003d,0x00000006,0x000001ee,0x000001d4,0x0005008e,0x00000025,
	0x000001ef,0x000001ed,0x000001ee,0x0004003d,0x00000025,0x000001f0,0x000001e9,0x00050081,
	0x00000025,0x000001f1,0x000001f0,0x000001ef,0x0003003e,0x000001e9,0x000001f1,0x0004003d,
	0x00000007,0x000001f2,0x00000180,0x0004003d,0x00000007,0x000001f3,0x00000180,0x00050094,
	0x00000006,0x000001f4,0x000001f2,0x000001f3,0x00050083,0x00000006,0x000001f5,0x00000085,
	0x000001f4,0x0004003d,0x00000025,0x000001f6,0x000001e9,0x0005008e,0x00000025,0x000001f7,
	0x000001f6,0x000001f5,0x0003003e,0x000001e9,0x000001f7,0x00050041,0x00000188,0x000001f8,
	0x00000187,0x000000c3,0x0004003d,0x00000006,0x000001f9,0x000001f8,0x0005008d,0x00000006,
	0x000001fb,0x000001f9,0x000001fa,0x0003003e,0x00000184,0x000001fb,0x0004003d,0x00000006,
	0x000001fc,0x00000184,0x0008000c,0x00000006,0x000001fd,0x00000001,0x00000031,0x00000084,
	0x00000128,0x000001fc,0x0004003d,0x00000006,0x00000200,0x00000184,0x0008000c,0x00000006,
	0x00000201,0x00000001,0x00000031,0x000001fe,0x000001ff,0x00000200,0x00050085,0x00000006,
	0x00000202,0x000001fd,0x00000201,0x0004003d,0x00000025,0x00000203,0x000001e9,0x0005008e,
	0x00000025,0x00000204,0x00000203,0x00000202,0x0003003e,0x000001e9,0x00000204,0x0004003d,
	0x00000025,0x00000205,0x000001e9,0x000200fe,0x00000205,0x00010038
};

const char* instanceExtensions[4] = {
	"VK_KHR_surface",
	"VK_KHR_win32_surface",
	"VK_EXT_debug_report",
	"VK_EXT_debug_utils"
};

const char* instanceLayers[1] = {
	//"VK_LAYER_RENDERDOC_Capture",
	//"VK_LAYER_VALVE_steam_overlay",
	"VK_LAYER_LUNARG_standard_validation"
};

const char* deviceExtensions[1] = {
	"VK_KHR_swapchain",
	//"VK_KHR_multiview",
	//"VK_NV_viewport_array2",
	//"VK_NVX_multiview_per_view_attributes",
	//"VK_EXT_sampler_filter_minmax",
	//"VK_NV_dedicated_allocation"
};

const char* deviceLayers[1] = {
	"VK_LAYER_LUNARG_standard_validation"
};

static VKAPI_ATTR VkBool32 VKAPI_CALL debugCallback( VkDebugUtilsMessageSeverityFlagBitsEXT messageSeverity, VkDebugUtilsMessageTypeFlagsEXT messageType, const VkDebugUtilsMessengerCallbackDataEXT* pCallbackData, void* pUserData  ) {
	printf( "Layer: %s\n", pCallbackData->pMessage );
	
	return VK_FALSE;
}

void registerDebugCallback( VkInstance instance ) {
	VkDebugUtilsMessengerEXT callback;
	VkDebugUtilsMessengerCreateInfoEXT debugCreateInfo = {};
	debugCreateInfo.sType = VK_STRUCTURE_TYPE_DEBUG_UTILS_MESSENGER_CREATE_INFO_EXT;
	debugCreateInfo.messageSeverity = /*VK_DEBUG_UTILS_MESSAGE_SEVERITY_VERBOSE_BIT_EXT | VK_DEBUG_UTILS_MESSAGE_SEVERITY_INFO_BIT_EXT |*/ VK_DEBUG_UTILS_MESSAGE_SEVERITY_WARNING_BIT_EXT | VK_DEBUG_UTILS_MESSAGE_SEVERITY_ERROR_BIT_EXT;
	debugCreateInfo.messageType = VK_DEBUG_UTILS_MESSAGE_TYPE_GENERAL_BIT_EXT | VK_DEBUG_UTILS_MESSAGE_TYPE_VALIDATION_BIT_EXT | VK_DEBUG_UTILS_MESSAGE_TYPE_PERFORMANCE_BIT_EXT;
	debugCreateInfo.pfnUserCallback = debugCallback;
	
	VkDebugUtilsMessengerEXT callbackMessenger;
	vkCreateDebugUtilsMessengerEXT( instance, &debugCreateInfo, NULL, &callbackMessenger );
}

void printExtensions( void ) {
	u32 extCount = 0;
	vkEnumerateInstanceExtensionProperties( NULL, &extCount, NULL );
	VkExtensionProperties* exts = malloc( extCount * sizeof( VkExtensionProperties ) );
	vkEnumerateInstanceExtensionProperties( NULL, &extCount, exts );
	
	printf( "Available instance extensions:\n" );
	for( int i = 0; i < extCount; i++ ) {
		printf( "\t%s\n", exts[i].extensionName );
	}
	
	free( exts );
}

void printLayers( void ) {
	u32 layerCount = 0;
	vkEnumerateInstanceLayerProperties( &layerCount, NULL );
	VkLayerProperties* layers = malloc( layerCount * sizeof( VkLayerProperties ) );
	vkEnumerateInstanceLayerProperties( &layerCount, layers );
	
	printf( "Available layers:\n" );
	for( int i = 0; i < layerCount; i++ ) {
		printf( "\t%s\n", layers[i].layerName );
	}
	
	free( layers );
}

void printDeviceExtensions( VkPhysicalDevice device ) {
	u32 deviceExtCount = 0;
	vkEnumerateDeviceExtensionProperties( device, NULL, &deviceExtCount, NULL );
	VkExtensionProperties* deviceExts = malloc( deviceExtCount * sizeof( VkExtensionProperties ) );
	vkEnumerateDeviceExtensionProperties( device, NULL, &deviceExtCount, deviceExts );
	
	printf( "Available device extensions:\n" );
	for( int i = 0; i < deviceExtCount; i++ ) {
		printf( "\t%s\n", deviceExts[i].extensionName );
	}
	
	free( deviceExts );
}

void printDeviceLayers( VkPhysicalDevice device ) {
	u32 deviceLayerCount = 0;
	vkEnumerateDeviceLayerProperties( device, &deviceLayerCount, NULL );
	VkLayerProperties* deviceLayers = malloc( deviceLayerCount * sizeof( VkLayerProperties ) );
	vkEnumerateDeviceLayerProperties( device, &deviceLayerCount, deviceLayers );
	
	printf( "Available device layers:\n" );
	for( int i = 0; i < deviceLayerCount; i++ ) {
		printf( "\t%s\n", deviceLayers[i].layerName );
	}
	
	free( deviceLayers );
}

void createDevice( VkInstance instance, VkPhysicalDevice* physicalDevice, VkDevice* device ) {
	u32 devices = 1;
	vkEnumeratePhysicalDevices( instance, &devices, physicalDevice );
	/*
	int DExtLen = OVR_Compositor->GetVulkanInstanceExtensionsRequired( NULL, 0 );
	char* DExt = malloc( DExtLen );
	OVR_Compositor->GetVulkanDeviceExtensionsRequired( *physicalDevice, DExt, DExtLen );
	
	printf( "VR Device extensions: %s\n", DExt );
	*/
	VkDeviceQueueCreateInfo queueCreateInfo = {};
	queueCreateInfo.sType = VK_STRUCTURE_TYPE_DEVICE_QUEUE_CREATE_INFO;
	queueCreateInfo.queueFamilyIndex = 0;
	queueCreateInfo.queueCount = 1;
	float queuePriority = 1.0f;
	queueCreateInfo.pQueuePriorities = &queuePriority;
	
	VkPhysicalDeviceFeatures deviceFeatures = {};
	
	VkDeviceCreateInfo deviceCreateInfo = {};
	deviceCreateInfo.sType = VK_STRUCTURE_TYPE_DEVICE_CREATE_INFO;
	deviceCreateInfo.pQueueCreateInfos = &queueCreateInfo;
	deviceCreateInfo.queueCreateInfoCount = 1;
	deviceCreateInfo.pEnabledFeatures = &deviceFeatures;
	deviceCreateInfo.enabledExtensionCount = 1;
	deviceCreateInfo.ppEnabledExtensionNames = deviceExtensions;
	deviceCreateInfo.enabledLayerCount = 1;
	deviceCreateInfo.ppEnabledLayerNames = deviceLayers;
	
	vkCreateDevice( *physicalDevice, &deviceCreateInfo, NULL, device );
	
	volkLoadDevice( *device );
}

LRESULT CALLBACK WndProc( HWND hWnd,UINT uMsg, WPARAM wParam, LPARAM lParam ) {
	switch( uMsg ) {
		case WM_CLOSE:
			//printf( "WM_CLOSE\n" );
			break;
			
		case WM_DESTROY:
			//printf( "WM_DESTROY\n" );
			PostQuitMessage(0); 
			break;
	}
	
	return DefWindowProc( hWnd, uMsg, wParam, lParam );
}

HWND createWindowSurface( VkInstance instance, VkSurfaceKHR* surface, const char* name, int width, int height ) {
	HINSTANCE hInst = GetModuleHandle( NULL );
	WNDCLASS wndClass = {};
	wndClass.style = CS_HREDRAW | CS_VREDRAW;
	wndClass.lpfnWndProc = WndProc;
	wndClass.hInstance = hInst;
	wndClass.hIcon = LoadIcon( NULL, IDI_APPLICATION );
	wndClass.hCursor = LoadCursor( NULL, IDC_ARROW );
	wndClass.hbrBackground = GetStockObject( BLACK_BRUSH );
	wndClass.lpszClassName = name;
	RegisterClass( &wndClass );
	
	RECT bounds = { 0, 0, width, height };
	AdjustWindowRect( &bounds, WS_VISIBLE | WS_SYSMENU | WS_OVERLAPPEDWINDOW, FALSE );
	printf( "adjusted window bounds: %d, %d, %d, %d\n", bounds.left, bounds.top, bounds.right, bounds.bottom );
	
	HWND hWnd = CreateWindow( name, name, WS_VISIBLE | WS_SYSMENU | WS_OVERLAPPEDWINDOW, CW_USEDEFAULT, CW_USEDEFAULT, bounds.right - bounds.left, bounds.bottom - bounds.top, NULL, NULL, hInst, NULL );
	
	VkWin32SurfaceCreateInfoKHR surfaceCreateInfo = {};
	surfaceCreateInfo.sType = VK_STRUCTURE_TYPE_WIN32_SURFACE_CREATE_INFO_KHR;
	surfaceCreateInfo.hwnd = hWnd;
	surfaceCreateInfo.hinstance = hInst;
	
	vkCreateWin32SurfaceKHR( instance, &surfaceCreateInfo, NULL, surface );
	
	return hWnd;
}

void createSwapchain( VkDevice device, VkSwapchainKHR* swapchain, VkSurfaceKHR surface, int width, int height, int minImages, VkPresentModeKHR presentMode ) {
	VkSwapchainCreateInfoKHR swapchainCreateInfo = {};
	swapchainCreateInfo.sType = VK_STRUCTURE_TYPE_SWAPCHAIN_CREATE_INFO_KHR;
	swapchainCreateInfo.surface = surface;
	swapchainCreateInfo.minImageCount = minImages;
	swapchainCreateInfo.imageFormat = VK_FORMAT_B8G8R8A8_SRGB;
	swapchainCreateInfo.imageColorSpace = VK_COLOR_SPACE_SRGB_NONLINEAR_KHR;
	swapchainCreateInfo.imageExtent.width = width;
	swapchainCreateInfo.imageExtent.height = height;
	swapchainCreateInfo.imageArrayLayers = 1;
	swapchainCreateInfo.imageUsage = VK_IMAGE_USAGE_COLOR_ATTACHMENT_BIT;
	swapchainCreateInfo.imageSharingMode = VK_SHARING_MODE_EXCLUSIVE;
	swapchainCreateInfo.compositeAlpha = VK_COMPOSITE_ALPHA_OPAQUE_BIT_KHR;
	swapchainCreateInfo.presentMode = presentMode;
	swapchainCreateInfo.clipped = VK_TRUE;
	swapchainCreateInfo.preTransform = VK_SURFACE_TRANSFORM_IDENTITY_BIT_KHR;
	swapchainCreateInfo.oldSwapchain = VK_NULL_HANDLE;
	
	vkCreateSwapchainKHR( device, &swapchainCreateInfo, NULL, swapchain );
}

void createImageView( VkDevice device, VkImageView* view, VkImage image, VkFormat format ) {
	VkImageViewCreateInfo viewCreateInfo = {};
	viewCreateInfo.sType = VK_STRUCTURE_TYPE_IMAGE_VIEW_CREATE_INFO;
	viewCreateInfo.image = image;
	viewCreateInfo.viewType = VK_IMAGE_VIEW_TYPE_2D;
	viewCreateInfo.format = format;
	viewCreateInfo.components.r = VK_COMPONENT_SWIZZLE_IDENTITY;
	viewCreateInfo.components.g = VK_COMPONENT_SWIZZLE_IDENTITY;
	viewCreateInfo.components.b = VK_COMPONENT_SWIZZLE_IDENTITY;
	viewCreateInfo.components.a = VK_COMPONENT_SWIZZLE_IDENTITY;
	viewCreateInfo.subresourceRange.aspectMask = VK_IMAGE_ASPECT_COLOR_BIT;
	viewCreateInfo.subresourceRange.baseMipLevel = 0;
	viewCreateInfo.subresourceRange.levelCount = 1;
	viewCreateInfo.subresourceRange.baseArrayLayer = 0;
	viewCreateInfo.subresourceRange.layerCount = 1;
	vkCreateImageView( device, &viewCreateInfo, NULL, view );
}

void createShaderModule( VkDevice device, VkShaderModule* module, u32* data, size_t dataSize ) {
	VkShaderModuleCreateInfo shaderCreateInfo = {};
	shaderCreateInfo.sType = VK_STRUCTURE_TYPE_SHADER_MODULE_CREATE_INFO;
	shaderCreateInfo.codeSize = dataSize;
	shaderCreateInfo.pCode = data;
	
	vkCreateShaderModule( device, &shaderCreateInfo, NULL, module );
}

struct VR_IVRSystem_FnTable* OVR_System;
struct VR_IVRCompositor_FnTable* OVR_Compositor;

int main( int argc, const char* argv[] ) {
	setvbuf( stdout, NULL, _IOLBF, 0 );
	/*
	int hasHMD = VR_IsHmdPresent();
	int hasRuntime = VR_IsRuntimeInstalled();
	printf( "HMD present? %d\nRuntime Installed? %d\n", hasHMD, hasRuntime );
	
	if( !( hasHMD && hasRuntime ) ) {
		return -1;
	}
	
	EVRInitError VRInitErr;
	VR_InitInternal( &VRInitErr, EVRApplicationType_VRApplication_Scene );
	
	printf( "VR_Init: %s\n", VR_GetVRInitErrorAsSymbol( VRInitErr ) );
	
	char fnTableName[128];
	sprintf( fnTableName, "FnTable:%s", IVRSystem_Version );
	OVR_System = (struct VR_IVRSystem_FnTable*)VR_GetGenericInterface( fnTableName, &VRInitErr );
	
	sprintf( fnTableName, "FnTable:%s", IVRCompositor_Version );
	OVR_Compositor = (struct VR_IVRCompositor_FnTable*)VR_GetGenericInterface( fnTableName, &VRInitErr );
	
	u32 rtW, rtH;
	OVR_System->GetRecommendedRenderTargetSize( &rtW, &rtH );
	printf( "VR render res: %dx%d\n", rtW, rtH );
	
	int IExtLen = OVR_Compositor->GetVulkanInstanceExtensionsRequired( NULL, 0 );
	char* IExt = malloc( IExtLen );
	OVR_Compositor->GetVulkanInstanceExtensionsRequired( IExt, IExtLen );
	
	printf( "VR Instance extensions: %s\n", IExt );
	*/
	const char* instExt[64];
	int numInstExt = 0;
	
	for( int i = 0; i < sizeof( instanceExtensions ) / sizeof( instanceExtensions[0] ); i++ ) {
		instExt[numInstExt] = instanceExtensions[i];
		numInstExt++;
	}
	/*
	char* VRIExt = strtok( IExt, " " );
	while( VRIExt != NULL ) {
		instExt[numInstExt] = VRIExt;
		numInstExt++;
		VRIExt = strtok( NULL, " " );
	}
	*/
	volkInitialize();
	
	u32 ver = volkGetInstanceVersion();
	printf( "Vulkan %d.%d.%d\n", VK_VERSION_MAJOR( ver ), VK_VERSION_MINOR( ver ), VK_VERSION_PATCH( ver ) );
	
	VkApplicationInfo appInfo = {};
	appInfo.sType = VK_STRUCTURE_TYPE_APPLICATION_INFO;
	appInfo.pApplicationName = "VRK";
	appInfo.applicationVersion = VK_MAKE_VERSION( 1, 0, 0 );
	appInfo.pEngineName = "VRK";
	appInfo.engineVersion = VK_MAKE_VERSION( 1, 0, 0 );
	appInfo.apiVersion = VK_API_VERSION_1_1;
	
	VkInstanceCreateInfo createInfo = {};
	createInfo.sType = VK_STRUCTURE_TYPE_INSTANCE_CREATE_INFO;
	createInfo.pApplicationInfo = &appInfo;
	createInfo.enabledExtensionCount = numInstExt;
	createInfo.ppEnabledExtensionNames = instExt;
	createInfo.enabledLayerCount = 1;
	createInfo.ppEnabledLayerNames = instanceLayers;
	
	VkInstance instance;
	VkResult ciRes = vkCreateInstance( &createInfo, NULL, &instance );
	printf( "vkCreateInstance returned %d\n", ciRes );
	fflush( stdout );
	
	volkLoadInstance( instance );
	
	registerDebugCallback( instance );
	
	//printExtensions();
	//printLayers();
	
	VkDevice device;
	VkPhysicalDevice physicalDevice;
	createDevice( instance, &physicalDevice, &device );
	
	//printDeviceExtensions( physicalDevice );
	//printDeviceLayers( physicalDevice );
	
	VkQueue queue;
	vkGetDeviceQueue( device, 0, 0, &queue );
	
	int width  = 1280;
	int height = 720;
	
	fflush( stdout );
	
	VkSurfaceKHR surface;
	HWND hWnd = createWindowSurface( instance, &surface, "VRK", width, height );
	
	VkSurfaceCapabilitiesKHR surfaceCaps;
	vkGetPhysicalDeviceSurfaceCapabilitiesKHR( physicalDevice, surface, &surfaceCaps );
	printf( "min swapchain size: %d\n", surfaceCaps.minImageCount );
	printf( "max swapchain size: %d\n", surfaceCaps.maxImageCount );
	
	u32 formatCount;
	vkGetPhysicalDeviceSurfaceFormatsKHR( physicalDevice, surface, &formatCount, NULL );
	VkSurfaceFormatKHR* surfaceFormats = malloc( formatCount * sizeof( VkSurfaceFormatKHR ) );
	vkGetPhysicalDeviceSurfaceFormatsKHR( physicalDevice, surface, &formatCount, surfaceFormats );
	
	VkBool32 surfaceSupport;
	vkGetPhysicalDeviceSurfaceSupportKHR( physicalDevice, 0, surface, &surfaceSupport );
	
	printf( "Available surface formats:\n" );
	for( int i = 0; i < formatCount; i++ ) {
		printf( "\tformat %d: type %d\n", i, surfaceFormats[i].format );
	}
	
	free( surfaceFormats );
	
	u32 presentModeCount;
	vkGetPhysicalDeviceSurfacePresentModesKHR( physicalDevice, surface, &presentModeCount, NULL );
	VkPresentModeKHR* presentModes = malloc( presentModeCount * sizeof( VkPresentModeKHR ) );
	vkGetPhysicalDeviceSurfacePresentModesKHR( physicalDevice, surface, &presentModeCount, presentModes );
	
	printf( "Available present modes:\n" );
	for( int i = 0; i < presentModeCount; i++ ) {
		printf( "\tmode %d\n", i, presentModes[i] );
	}
	
	free( presentModes );
	
	VkSwapchainKHR swapchain;
	createSwapchain( device, &swapchain, surface, width, height, 2, VK_PRESENT_MODE_FIFO_KHR );
	
	u32 numSwapchainImages;
	vkGetSwapchainImagesKHR( device, swapchain, &numSwapchainImages, NULL );
	VkImage* swapchainImages = malloc( numSwapchainImages * sizeof( VkImage ) );
	vkGetSwapchainImagesKHR( device, swapchain, &numSwapchainImages, swapchainImages );
	printf( "swapchain size: %d\n", numSwapchainImages );
	
	VkImageView* swapchainImageViews = malloc( numSwapchainImages * sizeof( VkImageView ) );
	for( int i = 0; i < numSwapchainImages; i++ ) {
		createImageView( device, &swapchainImageViews[i], swapchainImages[i], VK_FORMAT_B8G8R8A8_SRGB );
	}
	
	VkShaderModule vertShaderModule;
	VkShaderModule fragShaderModule;
	createShaderModule( device, &vertShaderModule, testVert, sizeof( testVert ) );
	createShaderModule( device, &fragShaderModule, testFrag, sizeof( testFrag ) );
	
	VkPipelineShaderStageCreateInfo stageCreateInfo[2] = {};
	stageCreateInfo[0].sType = VK_STRUCTURE_TYPE_PIPELINE_SHADER_STAGE_CREATE_INFO;
	stageCreateInfo[0].stage = VK_SHADER_STAGE_VERTEX_BIT;
	stageCreateInfo[0].module = vertShaderModule;
	stageCreateInfo[0].pName = "main";
	stageCreateInfo[1].sType = VK_STRUCTURE_TYPE_PIPELINE_SHADER_STAGE_CREATE_INFO;
	stageCreateInfo[1].stage = VK_SHADER_STAGE_FRAGMENT_BIT;
	stageCreateInfo[1].module = fragShaderModule;
	stageCreateInfo[1].pName = "main";
	
	VkPipelineVertexInputStateCreateInfo vertexInputInfo = {};
	vertexInputInfo.sType = VK_STRUCTURE_TYPE_PIPELINE_VERTEX_INPUT_STATE_CREATE_INFO;
	
	VkPipelineInputAssemblyStateCreateInfo inputAssembly = {};
	inputAssembly.sType = VK_STRUCTURE_TYPE_PIPELINE_INPUT_ASSEMBLY_STATE_CREATE_INFO;
	inputAssembly.topology = VK_PRIMITIVE_TOPOLOGY_TRIANGLE_LIST;
	inputAssembly.primitiveRestartEnable = VK_FALSE;
	
	VkViewport viewport;
	viewport.x = 0.0f;
	viewport.y = 0.0f;
	viewport.width = (float)width;
	viewport.height = (float)height;
	viewport.minDepth = 0.0f;
	viewport.maxDepth = 1.0f;
	
	VkRect2D scissor = {};
	scissor.offset.x = 0;
	scissor.offset.y = 0;
	scissor.extent.width = width;
	scissor.extent.height = height;
	
	VkPipelineViewportStateCreateInfo viewportState = {};
	viewportState.sType = VK_STRUCTURE_TYPE_PIPELINE_VIEWPORT_STATE_CREATE_INFO;
	viewportState.viewportCount = 1;
	viewportState.pViewports = &viewport;
	viewportState.scissorCount = 1;
	viewportState.pScissors = &scissor;
	
	VkPipelineRasterizationStateCreateInfo rasterizer = {};
	rasterizer.sType = VK_STRUCTURE_TYPE_PIPELINE_RASTERIZATION_STATE_CREATE_INFO;
	rasterizer.depthClampEnable = VK_FALSE;
	rasterizer.rasterizerDiscardEnable = VK_FALSE;
	rasterizer.polygonMode = VK_POLYGON_MODE_FILL;
	rasterizer.lineWidth = 1.0f;
	rasterizer.cullMode = VK_CULL_MODE_BACK_BIT;
	rasterizer.frontFace = VK_FRONT_FACE_CLOCKWISE;
	rasterizer.depthBiasEnable = VK_FALSE;
	
	VkPipelineMultisampleStateCreateInfo multisampling = {};
	multisampling.sType = VK_STRUCTURE_TYPE_PIPELINE_MULTISAMPLE_STATE_CREATE_INFO;
	multisampling.sampleShadingEnable = VK_FALSE;
	multisampling.rasterizationSamples = VK_SAMPLE_COUNT_1_BIT;
	
	VkPipelineColorBlendAttachmentState colourBlendAttachment = {};
	colourBlendAttachment.colorWriteMask = VK_COLOR_COMPONENT_RGBA_BITS;
	colourBlendAttachment.blendEnable = VK_FALSE;
	
	VkPipelineColorBlendStateCreateInfo colourBlending = {};
	colourBlending.sType = VK_STRUCTURE_TYPE_PIPELINE_COLOR_BLEND_STATE_CREATE_INFO;
	colourBlending.logicOpEnable = VK_FALSE;
	colourBlending.attachmentCount = 1;
	colourBlending.pAttachments = &colourBlendAttachment;
	
	VkPushConstantRange pushConst = {};
	pushConst.stageFlags = VK_SHADER_STAGE_FRAGMENT_BIT;
	pushConst.offset = 0;
	pushConst.size = sizeof( float );
	
	VkPipelineLayoutCreateInfo pipelineLayoutCreateInfo = {};
	pipelineLayoutCreateInfo.sType = VK_STRUCTURE_TYPE_PIPELINE_LAYOUT_CREATE_INFO;
	pipelineLayoutCreateInfo.setLayoutCount = 0;
	pipelineLayoutCreateInfo.pSetLayouts = NULL;
	pipelineLayoutCreateInfo.pushConstantRangeCount = 1;
	pipelineLayoutCreateInfo.pPushConstantRanges = &pushConst;
	
	VkPipelineLayout pipelineLayout;
	vkCreatePipelineLayout( device, &pipelineLayoutCreateInfo, NULL, &pipelineLayout );
	
	VkAttachmentDescription colourAttachment = {};
	colourAttachment.format = VK_FORMAT_B8G8R8A8_SRGB;
	colourAttachment.samples = VK_SAMPLE_COUNT_1_BIT;
	colourAttachment.loadOp = VK_ATTACHMENT_LOAD_OP_CLEAR;
	colourAttachment.storeOp = VK_ATTACHMENT_STORE_OP_STORE;
	colourAttachment.stencilLoadOp = VK_ATTACHMENT_LOAD_OP_DONT_CARE;
	colourAttachment.stencilStoreOp = VK_ATTACHMENT_STORE_OP_DONT_CARE;
	colourAttachment.initialLayout = VK_IMAGE_LAYOUT_UNDEFINED;
	colourAttachment.finalLayout = VK_IMAGE_LAYOUT_PRESENT_SRC_KHR;
	
	VkAttachmentReference colourAttachmentRef = {};
	colourAttachmentRef.attachment = 0;
	colourAttachmentRef.layout = VK_IMAGE_LAYOUT_COLOR_ATTACHMENT_OPTIMAL;
	
	VkSubpassDescription subpass = {};
	subpass.pipelineBindPoint = VK_PIPELINE_BIND_POINT_GRAPHICS;
	subpass.colorAttachmentCount = 1;
	subpass.pColorAttachments = &colourAttachmentRef;
	
	VkSubpassDependency dependency = {};
	dependency.srcSubpass = VK_SUBPASS_EXTERNAL;
	dependency.dstSubpass = 0;
	dependency.srcStageMask = VK_PIPELINE_STAGE_COLOR_ATTACHMENT_OUTPUT_BIT;
	dependency.srcAccessMask = 0;
	dependency.dstStageMask = VK_PIPELINE_STAGE_COLOR_ATTACHMENT_OUTPUT_BIT;
	dependency.dstAccessMask = VK_ACCESS_COLOR_ATTACHMENT_WRITE_BIT;
	
	/*
	u32 viewMask = 0x03;
	u32 correlationMask = 0x03;
	VkRenderPassMultiviewCreateInfo multiview = {};
	multiview.sType = VK_STRUCTURE_TYPE_RENDER_PASS_MULTIVIEW_CREATE_INFO;
	multiview.subpassCount = 1;
	multiview.pViewMasks = &viewMask;
	multiview.correlationMaskCount = 1;
	multiview.pCorrelationMasks = &correlationMask;
	*/
	
	VkRenderPassCreateInfo renderPassCreateInfo = {};
	renderPassCreateInfo.sType = VK_STRUCTURE_TYPE_RENDER_PASS_CREATE_INFO;
	//renderPassCreateInfo.pNext = &multiview;
	renderPassCreateInfo.attachmentCount = 1;
	renderPassCreateInfo.pAttachments = &colourAttachment;
	renderPassCreateInfo.subpassCount = 1;
	renderPassCreateInfo.pSubpasses = &subpass;
	renderPassCreateInfo.dependencyCount = 1;
	renderPassCreateInfo.pDependencies = &dependency;
	
	VkRenderPass renderpass;
	vkCreateRenderPass( device, &renderPassCreateInfo, NULL, &renderpass );
	
	VkGraphicsPipelineCreateInfo pipelineCreateInfo = {};
	pipelineCreateInfo.sType = VK_STRUCTURE_TYPE_GRAPHICS_PIPELINE_CREATE_INFO;
	pipelineCreateInfo.stageCount = 2;
	pipelineCreateInfo.pStages = stageCreateInfo;
	pipelineCreateInfo.pVertexInputState = &vertexInputInfo;
	pipelineCreateInfo.pInputAssemblyState = &inputAssembly;
	pipelineCreateInfo.pViewportState = &viewportState;
	pipelineCreateInfo.pRasterizationState = &rasterizer;
	pipelineCreateInfo.pMultisampleState = &multisampling;
	pipelineCreateInfo.pDepthStencilState = NULL;
	pipelineCreateInfo.pColorBlendState = &colourBlending;
	pipelineCreateInfo.pDynamicState = NULL;
	pipelineCreateInfo.layout = pipelineLayout;
	pipelineCreateInfo.renderPass = renderpass;
	pipelineCreateInfo.subpass = 0;
	
	VkPipeline graphicsPipeline;
	vkCreateGraphicsPipelines( device, VK_NULL_HANDLE, 1, &pipelineCreateInfo, NULL, &graphicsPipeline );
	
	VkFramebuffer* framebuffers = malloc( numSwapchainImages * sizeof( VkFramebuffer ) );
	for( int i = 0; i < numSwapchainImages; i++ ) {
		VkFramebufferCreateInfo framebufferInfo = {};
		framebufferInfo.sType = VK_STRUCTURE_TYPE_FRAMEBUFFER_CREATE_INFO;
		framebufferInfo.renderPass = renderpass;
		framebufferInfo.attachmentCount = 1;
		framebufferInfo.pAttachments = &swapchainImageViews[i];
		framebufferInfo.width = width;
		framebufferInfo.height = height;
		framebufferInfo.layers = 1;
		
		vkCreateFramebuffer( device, &framebufferInfo, NULL, &framebuffers[i] );
	}
	
	VkCommandPoolCreateInfo poolInfo = {};
	poolInfo.sType = VK_STRUCTURE_TYPE_COMMAND_POOL_CREATE_INFO;
	poolInfo.queueFamilyIndex = 0;
	poolInfo.flags = 0;
	
	VkCommandPool commandPool;
	vkCreateCommandPool( device, &poolInfo, NULL, &commandPool );
	
	/*
	VkCommandBuffer* commandBuffers = malloc( numSwapchainImages * sizeof( VkCommandBuffer ) );
	VkCommandBufferAllocateInfo allocInfo = {};
	allocInfo.sType = VK_STRUCTURE_TYPE_COMMAND_BUFFER_ALLOCATE_INFO;
	allocInfo.commandPool = commandPool;
	allocInfo.level = VK_COMMAND_BUFFER_LEVEL_PRIMARY;
	allocInfo.commandBufferCount = numSwapchainImages;
	vkAllocateCommandBuffers( device, &allocInfo, commandBuffers );
	
	for( int i = 0; i < numSwapchainImages; i++ ) {
		VkCommandBufferBeginInfo beginInfo = {};
		beginInfo.sType = VK_STRUCTURE_TYPE_COMMAND_BUFFER_BEGIN_INFO;
		beginInfo.flags = VK_COMMAND_BUFFER_USAGE_SIMULTANEOUS_USE_BIT;
		
		vkBeginCommandBuffer( commandBuffers[i], &beginInfo );
		
		VkRenderPassBeginInfo renderpassInfo = {};
		renderpassInfo.sType = VK_STRUCTURE_TYPE_RENDER_PASS_BEGIN_INFO;
		renderpassInfo.renderPass = renderpass;
		renderpassInfo.framebuffer = framebuffers[i];
		renderpassInfo.renderArea.offset.x = 0;
		renderpassInfo.renderArea.offset.y = 0;
		renderpassInfo.renderArea.extent.width = width;
		renderpassInfo.renderArea.extent.height = height;
		VkClearValue clearColour = { 0, 0, 0, 1 };
		renderpassInfo.clearValueCount = 1;
		renderpassInfo.pClearValues = &clearColour;
		
		vkCmdBeginRenderPass( commandBuffers[i], &renderpassInfo, VK_SUBPASS_CONTENTS_INLINE );
		
		vkCmdBindPipeline( commandBuffers[i], VK_PIPELINE_BIND_POINT_GRAPHICS, graphicsPipeline );
		
		float timeConst = 0.0f;
		vkCmdPushConstants( commandBuffers[i], pipelineLayout, VK_SHADER_STAGE_FRAGMENT_BIT, 0, sizeof( float ), &timeConst );
		
		vkCmdDraw( commandBuffers[i], 3, 1, 0, 0 );
		
		vkCmdEndRenderPass( commandBuffers[i] );
		
		vkEndCommandBuffer( commandBuffers[i] );
	}
	*/
	
	VkCommandBuffer cmdBuf;
	VkCommandBufferAllocateInfo allocInfo = {};
	allocInfo.sType = VK_STRUCTURE_TYPE_COMMAND_BUFFER_ALLOCATE_INFO;
	allocInfo.commandPool = commandPool;
	allocInfo.level = VK_COMMAND_BUFFER_LEVEL_PRIMARY;
	allocInfo.commandBufferCount = 1;
	vkAllocateCommandBuffers( device, &allocInfo, &cmdBuf );
	
	VkSemaphoreCreateInfo semaphoreInfo = {};
	semaphoreInfo.sType = VK_STRUCTURE_TYPE_SEMAPHORE_CREATE_INFO;
	
	VkSemaphore imageAvailable, renderFinished;
	vkCreateSemaphore( device, &semaphoreInfo, NULL, &imageAvailable );
	vkCreateSemaphore( device, &semaphoreInfo, NULL, &renderFinished );
	
	fflush( stdout );
	
	float t = 0;
	
	while( TRUE ) {
		MSG winMsg;
		PeekMessage( &winMsg, NULL, 0, 0, PM_REMOVE );
		DispatchMessage( &winMsg );
		
		if( winMsg.message == WM_QUIT ) {
			return winMsg.wParam;
		}
		
		u32 imageIndex;
		vkAcquireNextImageKHR( device, swapchain, UINT64_MAX, imageAvailable, VK_NULL_HANDLE, &imageIndex );
		
		
		VkCommandBufferBeginInfo beginInfo = {};
		beginInfo.sType = VK_STRUCTURE_TYPE_COMMAND_BUFFER_BEGIN_INFO;
		beginInfo.flags = VK_COMMAND_BUFFER_USAGE_SIMULTANEOUS_USE_BIT;
		
		vkBeginCommandBuffer( cmdBuf, &beginInfo );
		
		VkRenderPassBeginInfo renderpassInfo = {};
		renderpassInfo.sType = VK_STRUCTURE_TYPE_RENDER_PASS_BEGIN_INFO;
		renderpassInfo.renderPass = renderpass;
		renderpassInfo.framebuffer = framebuffers[imageIndex];
		renderpassInfo.renderArea.offset.x = 0;
		renderpassInfo.renderArea.offset.y = 0;
		renderpassInfo.renderArea.extent.width = width;
		renderpassInfo.renderArea.extent.height = height;
		VkClearValue clearColour = { 0, 0, 0, 1 };
		renderpassInfo.clearValueCount = 1;
		renderpassInfo.pClearValues = &clearColour;
		
		vkCmdBeginRenderPass( cmdBuf, &renderpassInfo, VK_SUBPASS_CONTENTS_INLINE );
		
		vkCmdBindPipeline( cmdBuf, VK_PIPELINE_BIND_POINT_GRAPHICS, graphicsPipeline );
		
		float timeConst = t;
		t += 1.0f / 75.0f;
		vkCmdPushConstants( cmdBuf, pipelineLayout, VK_SHADER_STAGE_FRAGMENT_BIT, 0, sizeof( float ), &timeConst );
		
		vkCmdDraw( cmdBuf, 3, 1, 0, 0 );
		
		vkCmdEndRenderPass( cmdBuf );
		
		vkEndCommandBuffer( cmdBuf );
		
		
		VkSubmitInfo submitInfo = {};
		submitInfo.sType = VK_STRUCTURE_TYPE_SUBMIT_INFO;
		submitInfo.waitSemaphoreCount = 1;
		submitInfo.pWaitSemaphores = &imageAvailable;
		VkPipelineStageFlags waitStages = VK_PIPELINE_STAGE_COLOR_ATTACHMENT_OUTPUT_BIT;
		submitInfo.pWaitDstStageMask = &waitStages;
		submitInfo.commandBufferCount = 1;
		submitInfo.pCommandBuffers = &cmdBuf;
		submitInfo.signalSemaphoreCount = 1;
		submitInfo.pSignalSemaphores = &renderFinished;
		
		vkQueueSubmit( queue, 1, &submitInfo, VK_NULL_HANDLE );
		
		VkPresentInfoKHR presentInfo = {};
		presentInfo.sType = VK_STRUCTURE_TYPE_PRESENT_INFO_KHR;
		presentInfo.waitSemaphoreCount = 1;
		presentInfo.pWaitSemaphores = &renderFinished;
		presentInfo.swapchainCount = 1;
		presentInfo.pSwapchains = &swapchain;
		presentInfo.pImageIndices = &imageIndex;
		
		vkQueuePresentKHR( queue, &presentInfo );
	}
	
	return 0;
}
